<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'>
    <meta content='no' name='msapplication-tap-highlight'>
    <meta content='Aparapi is an Open-source framework for executing native Java code on the GPU, developed by Syncleus.' name='description'>
    <title>
      Aparapi | Setting Up HSA
    </title>
    <!-- Favicons -->
    <link href='/images/favicon/apple-touch-icon-152x152.png' rel='apple-touch-icon-precomposed'>
    <meta content='#FFFFFF' name='msapplication-TileColor'>
    <meta content='/images/favicon/mstile-144x144.png' name='msapplication-TileImage'>
    <link href='/images/favicon/favicon-32x32.png' rel='icon' sizes='32x32'>
    <!-- Android 5 Chrome Color -->
    <meta content='#EE6E73' name='theme-color'>
    <!-- CSS -->
    <link href='/stylesheets/highlight.css' media='screen,projection' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/style.css' media='screen,projection' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/icon?family=Material+Icons' rel='stylesheet'>
  </head>
  <body>
    <header>
      <div class='container'>
        <a class='button-collapse top-nav waves-effect waves-light circle hide-on-large-only' data-activates='nav-mobile' href='#'>
          <i class='material-icons'>menu</i>
        </a>
      </div>
      <ul class='side-nav fixed' id='nav-mobile'>
        <li class='logo'>
          <a class='brand-logo' href='/' id='logo-container'>
            <object data='/images/logo.svg' id='front-page-logo' type='image/svg+xml'>Your browser does not support SVG</object>
          </a>
        </li>
        <li class='search'>
          <div class='search-wrapper card'>
            <input id='search'>
            <i class='material-icons'>search</i>
            <div class='search-results'></div>
          </div>
        </li>
        <li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/">Overview</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a class='collapsible-header waves-effect waves-teal'>Introduction</a><div class='collapsible-body'><ul><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/introduction/about.html">About</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/introduction/getting-started.html">Getting Started</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/introduction/faq.html">FAQ</a></li></ul></li></ul></div></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a class='collapsible-header waves-effect waves-teal'>Documentation</a><div class='collapsible-body'><ul><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/aparapi-patterns.html">Aparapi Patterns</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/choosing-specific-devices.html">Choosing Specific Devices</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/converting-java-to-opencl.html">Converting Java to OpenCL</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/emulating-multiple-entrypoints.html">Emulating Multiple Entrypoints</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/explicit-buffer-handling.html">ExplicitBufferHandling</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/hsa-enabled-lambda.html">HSA Enabled Lambda</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/kernel-guidelines.html">Kernel Guidelines</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/library-agent-duality.html">Library Agent Duality</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/new-features.html">New Features</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/opencl-bindings.html">OpenCL Bindings</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/private-memory-space.html">Private Memory Space</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/profiling-the-kernel.html">Profiling the Kernel</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/setting-up-hsa.html">Setting Up HSA</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/unit-tests.html">Unit Tests</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/using-hsa-simulator.html">Using HSA Simulator</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/constant-memory.html">Constant Memory</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/local-memory.html">Local Memory</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/multiple-dim-ranges.html">Multiple Dim Ranges</a></li></ul></li></ul></div></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a class='collapsible-header waves-effect waves-teal'>Proposals</a><div class='collapsible-body'><ul><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/proposals/multiple-dim-nd-range.html">Multiple Dim ND Range</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/proposals/lambdas.html">Lambdas</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/proposals/address-space-with-buffers.html">Address Space with Buffers</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/proposals/extensions.html">Extensions</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/proposals/device.html">Device</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/proposals/multiple-entry-points.html">Multiple Entry Points</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/proposals/lambda-syntax.html">Lambda Syntax</a></li></ul></li></ul></div></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/showcase.html">Showcase</a></li></ul></li>
      </ul>
    </header>
    <main>
      <div class='section no-pad-bot' id='index-banner'>
        <div class='container'>
          <h1 class='header center-on-small-only'>Setting Up HSA</h1>
          <div class='row center'>
            <h4 class='header col s12 light center'>How to setup a HSA machine for testing HSA enabled Aparapi</h4>
          </div>
          
        </div>
        
      </div>
      <div class='container'>
        <ul>
        <li>HSA Videos
        
        <ul>
        <li><a href="http://www.youtube.com/watch?v=5ntILiXTuhE" rel="nofollow">http://www.youtube.com/watch?v=5ntILiXTuhE</a></li>
        <li><a href="http://www.youtube.com/watch?v=caEPq4KvTTA" rel="nofollow">http://www.youtube.com/watch?v=caEPq4KvTTA</a></li>
        </ul></li>
        <li>HSA Articles
        
        <ul>
        <li><a href="http://developer.amd.com/resources/heterogeneous-computing/what-is-heterogeneous-computing/" rel="nofollow">http://developer.amd.com/resources/heterogeneous-computing/what-is-heterogeneous-computing/</a></li>
        </ul></li>
        <li>HSA Foundation
        
        <ul>
        <li><a href="https://github.com/HSAFoundation" rel="nofollow">https://github.com/HSAFoundation</a></li>
        </ul></li>
        </ul>
        
        <h2>Introduction</h2>
        
        <p>Now that HSA hardware is generally available I figured it was time to describe how to setup a HSA enabled Linux platform so that it can run Aparapi.</p>
        
        <p>Here is a nice introduction to HSA <a href="http://developer.amd.com/resources/heterogeneous-computing/what-is-heterogeneous-system-architecture-hsa/" rel="nofollow">http://developer.amd.com/resources/heterogeneous-computing/what-is-heterogeneous-system-architecture-hsa/</a></p>
        
        <p>But for Aparapi users the main advantage is that we are no longer limited to the GPU memory for running GPU tasks. Also because the CPU and the GPU can both see the same memory (the Java heap) Aparapi code can now access Java objects directly. This removes a number of Aparapi constraints. So more of your code can now run on the GPU.</p>
        
        <h2>Hardware Required</h2>
        
        <p>These instructions were based on my experience setting up a platform using the following hardware.</p>
        
        <table><thead>
        <tr>
        <th>Component</th>
        <th>Suggested</th>
        </tr>
        </thead><tbody>
        <tr>
        <td>APU</td>
        <td>AMD A10-7850K APU <a href="http://www.amd.com/us/products/desktop/processors/a-series/Pages/a-series-apu.aspx" rel="nofollow">http://www.amd.com/us/products/desktop/processors/a-series/Pages/a-series-apu.aspx</a></td>
        </tr>
        <tr>
        <td>Motherboard</td>
        <td>ASUS A88X-PRO or A88XM-A <a href="http://www.asus.com/Motherboards/A88XPRO" rel="nofollow">http://www.asus.com/Motherboards/A88XPRO</a> <a href="http://www.asus.com/Motherboards/A88XMA" rel="nofollow">http://www.asus.com/Motherboards/A88XMA</a></td>
        </tr>
        <tr>
        <td>Memory</td>
        <td>G.SKILL Ripjaws X Series 16GB (2 x 8GB) 240-Pin DDR3 SDRAM DDR3 2133</td>
        </tr>
        </tbody></table>
        
        <h2>Software Required</h2>
        
        <p>We also have some software dependencies.</p>
        
        <table><thead>
        <tr>
        <th>Component</th>
        <th>Suggested</th>
        </tr>
        </thead><tbody>
        <tr>
        <td>Java 8 JDK</td>
        <td><a href="http://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html" rel="nofollow">http://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html</a></td>
        </tr>
        <tr>
        <td>Ubuntu 13.10 64-bit edition</td>
        <td><a href="http://www.ubuntu.com/download" rel="nofollow">http://www.ubuntu.com/download</a></td>
        </tr>
        <tr>
        <td>Ubuntu 13.10 64-bit edition HSA enabled kernel image</td>
        <td><a href="https://github.com/HSAFoundation/Linux-HSA-Drivers-And-Images-AMD" rel="nofollow">https://github.com/HSAFoundation/Linux-HSA-Drivers-And-Images-AMD</a></td>
        </tr>
        <tr>
        <td>OKRA HSA enabled runtime</td>
        <td><a href="https://github.com/HSAFoundation/Okra-Interface-to-HSA-Device" rel="nofollow">https://github.com/HSAFoundation/Okra-Interface-to-HSA-Device</a></td>
        </tr>
        </tbody></table>
        
        <p>The hope is that the list of HW/SW support widens, but for early adopters this is the set of HW/SW we have been testing with.</p>
        
        <h1>Setting up your System</h1>
        
        <h2>Configure your BIOS to support IOMMU</h2>
        
        <p>Once you have built your AMD A10-7850K APU based system you should make sure that your system is configured to use IOMMU.</p>
        
        <p>Remember HSA allows the GPU and CPU cores to share the same memory. IOMMU needs to be enabled for this.</p>
        
        <h2>For the A88X-PRO board</h2>
        
        <p>For the recommended ASUS board above you will need to make sure that your BIOS is updated to version 0802. Here is a direct link to the 0802 version of the BIOS from ASUS&rsquo;s site as of 2/28/2014.</p>
        
        <p><a href="http://dlcdnet.asus.com/pub/ASUS/mb/SocketFM2/A88X-PRO/A88X-PRO-ASUS-0802.zip" rel="nofollow">http://dlcdnet.asus.com/pub/ASUS/mb/SocketFM2/A88X-PRO/A88X-PRO-ASUS-0802.zip</a></p>
        
        <p>Once you have the latest BIOS you will need to enable IOMMU in the system BIOS. This is done using the &ldquo;CPU Configuration&rdquo; screen under &ldquo;Advanced Mode&rdquo; and then enabling IOMMU.</p>
        
        <h2>For the A88XM-A</h2>
        
        <p>You will need the 1102 (or later) version of the BIOS</p>
        
        <p><a href="http://dlcdnet.asus.com/pub/ASUS/mb/SocketFM2/A88XM-A/A88XM-A-ASUS-1102.zip" rel="nofollow">http://dlcdnet.asus.com/pub/ASUS/mb/SocketFM2/A88XM-A/A88XM-A-ASUS-1102.zip</a></p>
        
        <p>Once you have the latest BIOS you will need to enable IOMMU in the system BIOS. This is done using the &ldquo;CPU Configuration&rdquo; screen under &ldquo;Advanced Mode&rdquo; and then enabling IOMMU.</p>
        
        <h2>Installing Ubuntu 13.10</h2>
        
        <p>Once you have your BIOS setup you need to install Ubuntu <a href="http://www.ubuntu.com/download" rel="nofollow">http://www.ubuntu.com/download</a></p>
        
        <p>Installing HSA enabled kernel + driver
        Until all of the HSA drivers and features are available in stock linux and have been pulled down into Ubuntu distro we will need a special HSA enabled kernel image.</p>
        
        <h2>A Ubuntu compatible kernel can be pulled from github</h2>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~ <span class="c"># I put all of this in my home dir</span>
        <span class="gp">$ </span>sudo apt-get install git
        <span class="gp">$ </span>git clone https://github.com/HSAFoundation/Linux-HSA-Drivers-And-Images-AMD.git
        </code></pre>
        <p>Or you can pull the zip and unzip using curl if you don&rsquo;t have git</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~ <span class="c"># I put all of this in my home dir</span>
        <span class="gp">$ </span>curl -L https://github.com/HSAFoundation/Linux-HSA-Drivers-And-Images-AMD/archive/master.zip &gt; drivers.zip
        <span class="gp">$ </span>unzip drivers.zip
        </code></pre>
        <p>This will create the following subdir on your machine</p>
        <pre class="highlight plaintext"><code>
        Linux-HSA-Drivers-And-Images-AMD/
           LICENSE
           README.md
           ubuntu12.10-based-alpha1/
               xorg.conf
               linux-image-3.13.0-kfd+_3.13.0-kfd+-2_amd64.deb
        </code></pre>
        <p>From here we can install our new image and setup the HSA KFD (the driver for HSA)and reboot to the new kernel.</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~/Linux-HSA-Drivers-And-Images-AMD
        <span class="gp">$ </span><span class="nb">echo</span>  <span class="s2">"KERNEL==</span><span class="se">\"</span><span class="s2">kfd</span><span class="se">\"</span><span class="s2">, MODE=</span><span class="se">\"</span><span class="s2">0666</span><span class="se">\"</span><span class="s2">"</span> | sudo tee /etc/udev/rules.d/kfd.rules
        <span class="gp">$ </span>sudo dpkg -i ubuntu13.10-based-alpha1/linux-image-3.13.0-kfd+_3.13.0-kfd+-2_amd64.deb
        <span class="gp">$ </span>sudo cp ~/Linux-HSA-Drivers-And-Images-AMD/ubuntu13.10-based-alpha1/xorg.conf /etc/X11
        <span class="gp">$ </span>sudo reboot
        </code></pre>
        <h2>Installing OKRA RT</h2>
        
        <p>Now we need a runtime for executing HSAIL code. We share common infrastructure used by our sister OpenJDK project called Sumatra. Both Aparapi and Sumatra use OKRA to execute HSAIL code on a HSA enabled platform.</p>
        
        <p>We can get the latest version using of OKRA (Offloadable Kernel Runtime API) from another HSA foundation repository.</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~ <span class="c"># I put all of this in my home dir</span>
        <span class="gp">$ </span>git clone https://github.com/HSAFoundation/Okra-Interface-to-HSA-Device.git
        </code></pre>
        <p>or if you prefer curl/unzip</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~ <span class="c"># I put all of this in my home dir</span>
        <span class="gp">$ </span>curl -L https://github.com/HSAFoundation/Okra-Interface-to-HSA-Device/archive/master.zip &gt; okra.zip
        <span class="gp">$ </span>unzip okra.zip
        </code></pre>
        <p>This will create the following dir structure.</p>
        <pre class="highlight java"><code>
        <span class="n">Okra</span><span class="o">-</span><span class="n">Interface</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">HSA</span><span class="o">-</span><span class="n">Device</span><span class="o">/</span>
           <span class="n">README</span><span class="o">.</span><span class="na">md</span>
           <span class="n">okra</span><span class="o">/</span>
              <span class="n">README</span>
              <span class="n">dist</span><span class="o">/</span>
                 <span class="n">okra</span><span class="o">.</span><span class="na">jar</span>
                 <span class="n">bin</span><span class="o">/</span>
                    <span class="n">libamdhsacl64</span><span class="o">.</span><span class="na">so</span>
                    <span class="n">libnewhsacore64</span><span class="o">.</span><span class="na">so</span>
                    <span class="n">libokra_x86_64</span><span class="o">.</span><span class="na">so</span>
                 <span class="n">include</span><span class="o">/</span>
                    <span class="n">common</span><span class="o">.</span><span class="na">h</span>
                    <span class="n">okraContext</span><span class="o">.</span><span class="na">h</span>
        
              <span class="n">samples</span><span class="o">/</span>
                 <span class="n">dist</span><span class="o">/</span>
                   <span class="n">Squares</span>
                   <span class="n">Squares</span><span class="o">.</span><span class="na">hsail</span>
                 <span class="n">runSquares</span><span class="o">.</span><span class="na">sh</span>
        </code></pre>
        <p>OKRA offers a C API (for those that are so inclined ;) ) as well as a java jar file which contains JNI wrappers.</p>
        
        <h2>Sanity check your HSA and OKRA install</h2>
        
        <p>So to sanity check your install you can run a small sample app (binary)</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~/Okra-Interface-to-HSA-Device/okra/samples/
        <span class="gp">$ </span>sh runSquares.sh
        </code></pre>
        <p>If everything is OK this should run the C Squares test app.</p>
        
        <p>Congratulations, you have executed your first HSA enabled app.</p>
        
        <p>Getting OpenCL headers and libraries
        We need OpenCL headers and libraries to build Aparapi (remember we still support OpenCL).</p>
        
        <p>My recommendation is to download AMD-APP-SDK-v2.9-lnx64.tgz from <a href="http://developer.amd.com/tools-and-sdks/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/downloads" rel="nofollow">http://developer.amd.com/tools-and-sdks/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/downloads</a> and extract the libraries and headers.</p>
        
        <p>Note that we have nested zipped jars in this archive.</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~
        <span class="gp">$ </span>gunzip ~/Downloads/AMD-APP-SDK-v2.9-lnx64.tgz
        <span class="gp">$ </span>tar xvf ~/Downloads/AMD-APP-SDK-v2.9-lnx64.tar
        <span class="gp">$ </span>rm ~/default-install_lnx_64.pl ~/icd-registration.tgz ~/Install-AMD-APP.sh ~/ReadMe.txt
        <span class="gp">$ </span>gunzip ~/AMD-APP-SDK-v2.9-RC-lnx64.tgz
        <span class="gp">$ </span>tar xvf ~/AMD-APP-SDK-v2.9-RC-lnx64.tar
        <span class="gp">$ </span>rm ~/AMD-APP-SDK-v2.9-RC-lnx64.tar
        <span class="gp">$ </span>rm -rf AMD-APP-SDK-v2.9-RC-lnx64/samples
        </code></pre>
        <p>Note where AMD-APP-SDK-v2.9-RC-lnx64 is located, you need this in the following step.</p>
        
        <h2>You will need Java 8</h2>
        
        <p>Download Java 8 JDK from <a href="https://jdk8.java.net/download.html" rel="nofollow">https://jdk8.java.net/download.html</a> I chose to download the zipped tar and not install with RPM so I can control the location of the install.</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~
        <span class="gp">$ </span>gunzip /home/gfrost/Downloads/jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz
        <span class="gp">$ </span>tar xvf ~/Downloads/jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar
        </code></pre>
        <p>I now have ~/jdk1.8.0 as my java 8 install dir.</p>
        
        <p>Alternatively the following will pull from Oracles site using curl</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span><span class="nb">cd</span> ~
        <span class="gp">$ </span>curl http://download.java.net/jdk8/archive/b132/binaries/jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz?q<span class="o">=</span>download/jdk8/archive/b132/binaries/jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz &gt; jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz
        <span class="gp">$ </span>gunzip jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz
        <span class="gp">$ </span>tar xvf jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar
        </code></pre>
        <p>I now have ~/jdk1.8.0 as my java 8 install dir.</p>
        
        <h2>You will need g++</h2>
        
        <p>We use g++ to build the JNI side of Aparapi</p>
        <pre class="highlight shell"><code>
        <span class="gp">$ </span>sudo apt-get install g++
        </code></pre>
        <h2>Pulling the HSA enabled Aparapi branch and building</h2>
        
        <p>Now we can pull the Aparapi lambda/HSA branch from GIT</p>
        <pre class="highlight plaintext"><code>$ sudo apt-get install git
        $ git clone https://github.com/Syncleus/aparapi-ambda.git
        </code></pre>
        <p>If you are familiar with Aparapi structure then this tree should not be that much of a surprise but there are a few subtle changes.</p>
        
        <p>Specifically the build system has been changed to support OKRA, Aparapi JNI code is provided as a Java agent and the execution scripts all refer to ${APARAPI_HOME}/env.sh to setup a reasonable execution environment.</p>
        
        <p>You will need to edit env.sh and make sure that APARAPI<em>HOME, OKRA</em>HOME, OCL<em>HOME and JAVA</em>HOME correctly.</p>
        
        <p>Here are how I set my vars.</p>
        
        <table><thead>
        <tr>
        <th>environment variable</th>
        <th>value</th>
        </tr>
        </thead><tbody>
        <tr>
        <td>JAVA_HOME</td>
        <td>/home/${LOGNAME}/jdk1.8.0</td>
        </tr>
        <tr>
        <td>OCL_HOME</td>
        <td>/home/${LOGNAME}/AMD-APP-SDK-v2.9-RC-lnx64</td>
        </tr>
        <tr>
        <td>APARAPI_HOME</td>
        <td>/home/${LOGNAME}/aparapi-lambda</td>
        </tr>
        <tr>
        <td>OKRA_HOME</td>
        <td>/home/${LOGNAME}/Okra-Interface-to-HSA-Device/okra/</td>
        </tr>
        </tbody></table>
        
        <p>It is recommended (thanks notzed ;) ) that you test your env.sh using sh env.sh until it stops reporting errors. Once you have finished I recommend sourcing it into your current shell before building with ant.</p>
        <pre class="highlight java"><code>
        <span class="err">$</span> <span class="n">cd</span> <span class="o">~</span><span class="n">aparapi</span><span class="o">-</span><span class="n">lambda</span>
        <span class="err">$</span> <span class="o">.</span> <span class="n">env</span><span class="o">.</span><span class="na">sh</span>
        <span class="err">$</span> <span class="n">mvn</span>
        </code></pre>
        <p>If you get any problems check the env.sh vars first.</p>
        
        <p>If all is well you should be able to run some samples.</p>
        <pre class="highlight java"><code>
        <span class="err">$</span> <span class="n">cd</span> <span class="o">~/</span><span class="n">aparapi</span><span class="o">-</span><span class="n">lambda</span><span class="o">/</span><span class="n">samples</span><span class="o">/</span><span class="n">mandel</span>
        <span class="err">$</span> <span class="n">sh</span> <span class="n">hsailmandel</span><span class="o">.</span><span class="na">sh</span>
        </code></pre>
      </div>
    </main>
    <footer class='page-footer'>
      <div class='container'>
        <div class='row'>
          <div class='col l4 s12'>
            <h5 class='white-text'>Help Aparapi Grow</h5>
            <p class='grey-text text-lighten-4'>We are a team of volunteers working on this project like it's our full time job. Any amount would help support and continue development on this project and is greatly appreciated.</p>
            <form action='https://www.paypal.com/cgi-bin/webscr' id='paypal-donate' method='post' target='_top'>
              <input name='cmd' type='hidden' value='_s-xclick'>
              <input name='encrypted' type='hidden' value='-----BEGIN PKCS7-----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-----END PKCS7-----'>
              <button alt='PayPal - The safer, easier way to pay online!' class='btn waves-effect waves-light red lighten-3' name='action' type='submit'>
                Donate Now
              </button>
            </form>
          </div>
          <div class='col l4 s12'>
            <h5 class='white-text'>Join the Discussion</h5>
            <p class='grey-text text-lighten-4'>We have a Gitter chat room set up where you can talk directly with us. Come in and discuss new features, future goals, general problems or questions, or anything else you can think of.</p>
            <a class='btn waves-effect waves-light red lighten-3' href='https://gitter.im/Syncleus/aparapi' target='_blank'>Chat</a>
          </div>
          <div class='col l4 s12' style='overflow: hidden;'>
            <h5 class='white-text'>Connect</h5>
            <iframe allowtransparency='true' frameborder='0' height='30' scrolling='0' src='http://ghbtns.com/github-btn.html?user=Syncleus&amp;repo=aparapi&amp;type=watch&amp;count=true&amp;size=large' width='170'></iframe>
            <br>
            <a class='twitter-follow-button' data-dnt='true' data-show-count='true' data-size='large' href='https://twitter.com/AparapiLib'>Follow @AparapiLib</a>
            <br>
            <div class='g-follow' data-annotation='bubble' data-height='24' data-href='https://plus.google.com/102266131584900704956' data-rel='publisher'></div>
          </div>
        </div>
      </div>
      <div class='footer-copyright'>
        <div class='container'>
          © 2016-2017 Syncleus, All rights reserved.
          <a class='grey-text text-lighten-4 right' href='https://github.com/Syncleus/aparapi/blob/master/LICENSE'>Apache License v2</a>
        </div>
      </div>
    </footer>
    <!-- Scripts -->
    <script src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
    <script>
      if (!window.jQuery) { document.write('<script src="bin/jquery-2.1.1.min.js"><\/script>'); }
    </script>
    <script src='/javascripts/jquery.timeago.js'></script>
    <script src='/javascripts/materialize.min.js'></script>
    <script src='/javascripts/lunr.min.js'></script>
    <script src='/javascripts/search.js'></script>
    <script src='/javascripts/materialize.js'></script>
    <script src='/javascripts/init.js'></script>
    <!-- Twitter Button -->
    <script>
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
    </script>
    <!-- Google Plus Button -->
    <script async='' defer='defer' src='https://apis.google.com/js/platform.js'></script>
  </body>
</html>
