<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'>
    <meta content='no' name='msapplication-tap-highlight'>
    <meta content='Materialize is a modern responsive CSS framework based on Material Design by Google. ' name='description'>
    <title>
      Aparapi | SettingUpLinuxHSAMachineForAparapi
    </title>
    <!-- Favicons -->
    <link href='/images/favicon/apple-touch-icon-152x152.png' rel='apple-touch-icon-precomposed'>
    <meta content='#FFFFFF' name='msapplication-TileColor'>
    <meta content='/images/favicon/mstile-144x144.png' name='msapplication-TileImage'>
    <link href='/images/favicon/favicon-32x32.png' rel='icon' sizes='32x32'>
    <!-- Android 5 Chrome Color -->
    <meta content='#EE6E73' name='theme-color'>
    <!-- CSS -->
    <link href='/stylesheets/highlight.css' media='screen,projection' rel='stylesheet' type='text/css'>
    <link href='/stylesheets/style.css' media='screen,projection' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/icon?family=Material+Icons' rel='stylesheet'>
  </head>
  <body>
    <header>
      <div class='container'>
        <a class='button-collapse top-nav waves-effect waves-light circle hide-on-large-only' data-activates='nav-mobile' href='#'>
          <i class='material-icons'>menu</i>
        </a>
      </div>
      <ul class='side-nav fixed' id='nav-mobile'>
        <li class='logo'>
          <a class='brand-logo' href='/' id='logo-container'>
            <object data='/images/logo.svg' id='front-page-logo' type='image/svg+xml'>Your browser does not support SVG</object>
          </a>
        </li>
        <li class='search'>
          <div class='search-wrapper card'>
            <input id='search'>
            <i class='material-icons'>search</i>
            <div class='search-results'></div>
          </div>
        </li>
        <li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a class='collapsible-header waves-effect waves-teal'>Documentation</a><div class='collapsible-body'><ul><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/AccessingMultiDimNDRangeProposal.html">AccessingMultiDimNDRangeProposal</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/AddingLambdasToAparapi.html">AddingLambdasToAparapi</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/AddressSpacesUsingBuffers.html">AddressSpacesUsingBuffers</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/AparapiExtensionProposal.html">AparapiExtensionProposal</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/AparapiPatterns.html">AparapiPatterns</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/Attribution.html">Attribution</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/BuildingNBody.html">BuildingNBody</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/ChoosingSpecificDevicesForExecution.html">ChoosingSpecificDevicesForExecution</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/ContributionGuide.html">ContributionGuide</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/ConvertingBytecodeToOpenCL.html">ConvertingBytecodeToOpenCL</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/DevelopersGuide.html">DevelopersGuide</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/DevelopersGuideLinux.html">DevelopersGuideLinux</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/DevelopersGuideWindows.html">DevelopersGuideWindows</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/DeviceProposal.html">DeviceProposal</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/EmulatingMultipleEntrypointsUsingCurrentAPI.html">EmulatingMultipleEntrypointsUsingCurrentAPI</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/ExplicitBufferHandling.html">ExplicitBufferHandling</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/FrequentlyAskedQuestions.html">FrequentlyAskedQuestions</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/HSAEnablementOfLambdaBranch.html">HSAEnablementOfLambdaBranch</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/HSAEnablementOfLambdaBranchSidebar.html">HSAEnablementOfLambdaBranchSidebar</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/HowToAddUML.html">HowToAddUML</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/JavaKernelGuidelines.html">JavaKernelGuidelines</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/LIbraryAgentDuality.html">LIbraryAgentDuality</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/MultipleEntryPointSupportProposal.html">MultipleEntryPointSupportProposal</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/NewFeatures.html">NewFeatures</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/NewOpenCLBinding.html">NewOpenCLBinding</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/PossibleAparapiLambdaSyntaxOptions.html">PossibleAparapiLambdaSyntaxOptions</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/PrivateMemorySpace.html">PrivateMemorySpace</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/ProfilingKernelExecution.html">ProfilingKernelExecution</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/ProfilingKernelsFromEclipse.html">ProfilingKernelsFromEclipse</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/README.html">APARAPI Documentation</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/SettingUpLinuxHSAMachineForAparapi.html">SettingUpLinuxHSAMachineForAparapi</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/SettingUpLinuxHSAMachineForAparapiSidebar.html">SettingUpLinuxHSAMachineForAparapiSidebar</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/UnitTestGuide.html">UnitTestGuide</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/UsersGuide.html">UsersGuide</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/UsingAparapiLambdaBranchWithHSASimulator.html">UsingAparapiLambdaBranchWithHSASimulator</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/UsingConstantMemory.html">UsingConstantMemory</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/UsingLocalMemory.html">UsingLocalMemory</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/documentation/UsingMultiDimExecutionRanges.html">UsingMultiDimExecutionRanges</a></li></ul></li></ul></div></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/">Overview</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a class='collapsible-header waves-effect waves-teal'>Introduction</a><div class='collapsible-body'><ul><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/introduction/about.html">About</a></li></ul></li><li class='no-padding'><ul class='collapsible collapsible-accordion'><li class='bold'><a href="/introduction/getting-started.html">Getting Started</a></li></ul></li></ul></div></li></ul></li>
      </ul>
    </header>
    <main>
      <div class='section no-pad-bot' id='index-banner'>
        <div class='container'>
          <h1 class='header center-on-small-only'>SettingUpLinuxHSAMachineForAparapi</h1>
          <div class='row center'>
          </div>
          
        </div>
        
      </div>
      <div class='container'>
        <p><em>How to setup a Linux HSA machine for testing HSA enabled Aparapi Updated May 22, 2014 by frost.g&hellip;@gmail.com</em></p>
        
        <ul>
        <li>HSA Videos
        
        <ul>
        <li><a href="http://www.youtube.com/watch?v=5ntILiXTuhE" rel="nofollow">http://www.youtube.com/watch?v=5ntILiXTuhE</a></li>
        <li><a href="http://www.youtube.com/watch?v=caEPq4KvTTA" rel="nofollow">http://www.youtube.com/watch?v=caEPq4KvTTA</a></li>
        </ul></li>
        <li>HSA Articles
        
        <ul>
        <li><a href="http://developer.amd.com/resources/heterogeneous-computing/what-is-heterogeneous-computing/" rel="nofollow">http://developer.amd.com/resources/heterogeneous-computing/what-is-heterogeneous-computing/</a></li>
        </ul></li>
        <li>HSA Foundation
        
        <ul>
        <li><a href="https://github.com/HSAFoundation" rel="nofollow">https://github.com/HSAFoundation</a></li>
        </ul></li>
        </ul>
        
        <h2>Introduction</h2>
        
        <p>Now that HSA hardware is generally available I figured it was time to describe how to setup a HSA enabled Linux platform so that it can run Aparapi.</p>
        
        <p>Here is a nice introduction to HSA <a href="http://developer.amd.com/resources/heterogeneous-computing/what-is-heterogeneous-system-architecture-hsa/" rel="nofollow">http://developer.amd.com/resources/heterogeneous-computing/what-is-heterogeneous-system-architecture-hsa/</a></p>
        
        <p>But for Aparapi users the main advantage is that we are no longer limited to the GPU memory for running GPU tasks. Also because the CPU and the GPU can both see the same memory (the Java heap) Aparapi code can now access Java objects directly. This removes a number of Aparapi constraints. So more of your code can now run on the GPU.</p>
        
        <h2>Hardware Required</h2>
        
        <p>These instructions were based on my experience setting up a platform using the following hardware.</p>
        
        <table><thead>
        <tr>
        <th>Component</th>
        <th>Suggested</th>
        </tr>
        </thead><tbody>
        <tr>
        <td>APU</td>
        <td>AMD A10-7850K APU <a href="http://www.amd.com/us/products/desktop/processors/a-series/Pages/a-series-apu.aspx" rel="nofollow">http://www.amd.com/us/products/desktop/processors/a-series/Pages/a-series-apu.aspx</a></td>
        </tr>
        <tr>
        <td>Motherboard</td>
        <td>ASUS A88X-PRO or A88XM-A <a href="http://www.asus.com/Motherboards/A88XPRO" rel="nofollow">http://www.asus.com/Motherboards/A88XPRO</a> <a href="http://www.asus.com/Motherboards/A88XMA" rel="nofollow">http://www.asus.com/Motherboards/A88XMA</a></td>
        </tr>
        <tr>
        <td>Memory</td>
        <td>G.SKILL Ripjaws X Series 16GB (2 x 8GB) 240-Pin DDR3 SDRAM DDR3 2133</td>
        </tr>
        </tbody></table>
        
        <h2>Software Required</h2>
        
        <p>We also have some software dependencies.</p>
        
        <table><thead>
        <tr>
        <th>Component</th>
        <th>Suggested</th>
        </tr>
        </thead><tbody>
        <tr>
        <td>Java 8 JDK</td>
        <td><a href="http://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html" rel="nofollow">http://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html</a></td>
        </tr>
        <tr>
        <td>Ubuntu 13.10 64-bit edition</td>
        <td><a href="http://www.ubuntu.com/download" rel="nofollow">http://www.ubuntu.com/download</a></td>
        </tr>
        <tr>
        <td>Ubuntu 13.10 64-bit edition HSA enabled kernel image</td>
        <td><a href="https://github.com/HSAFoundation/Linux-HSA-Drivers-And-Images-AMD" rel="nofollow">https://github.com/HSAFoundation/Linux-HSA-Drivers-And-Images-AMD</a></td>
        </tr>
        <tr>
        <td>OKRA HSA enabled runtime</td>
        <td><a href="https://github.com/HSAFoundation/Okra-Interface-to-HSA-Device" rel="nofollow">https://github.com/HSAFoundation/Okra-Interface-to-HSA-Device</a></td>
        </tr>
        </tbody></table>
        
        <p>The hope is that the list of HW/SW support widens, but for early adopters this is the set of HW/SW we have been testing with.</p>
        
        <h1>Setting up your System</h1>
        
        <h2>Configure your BIOS to support IOMMU</h2>
        
        <p>Once you have built your AMD A10-7850K APU based system you should make sure that your system is configured to use IOMMU.</p>
        
        <p>Remember HSA allows the GPU and CPU cores to share the same memory. IOMMU needs to be enabled for this.</p>
        
        <h2>For the A88X-PRO board</h2>
        
        <p>For the recommended ASUS board above you will need to make sure that your BIOS is updated to version 0802. Here is a direct link to the 0802 version of the BIOS from ASUS&rsquo;s site as of 2/28/2014.</p>
        
        <p><a href="http://dlcdnet.asus.com/pub/ASUS/mb/SocketFM2/A88X-PRO/A88X-PRO-ASUS-0802.zip" rel="nofollow">http://dlcdnet.asus.com/pub/ASUS/mb/SocketFM2/A88X-PRO/A88X-PRO-ASUS-0802.zip</a></p>
        
        <p>Once you have the latest BIOS you will need to enable IOMMU in the system BIOS. This is done using the &ldquo;CPU Configuration&rdquo; screen under &ldquo;Advanced Mode&rdquo; and then enabling IOMMU.</p>
        
        <h2>For the A88XM-A</h2>
        
        <p>You will need the 1102 (or later) version of the BIOS</p>
        
        <p><a href="http://dlcdnet.asus.com/pub/ASUS/mb/SocketFM2/A88XM-A/A88XM-A-ASUS-1102.zip" rel="nofollow">http://dlcdnet.asus.com/pub/ASUS/mb/SocketFM2/A88XM-A/A88XM-A-ASUS-1102.zip</a></p>
        
        <p>Once you have the latest BIOS you will need to enable IOMMU in the system BIOS. This is done using the &ldquo;CPU Configuration&rdquo; screen under &ldquo;Advanced Mode&rdquo; and then enabling IOMMU.</p>
        
        <h2>Installing Ubuntu 13.10</h2>
        
        <p>Once you have your BIOS setup you need to install Ubuntu <a href="http://www.ubuntu.com/download" rel="nofollow">http://www.ubuntu.com/download</a></p>
        
        <p>Installing HSA enabled kernel + driver
        Until all of the HSA drivers and features are available in stock linux and have been pulled down into Ubuntu distro we will need a special HSA enabled kernel image.</p>
        
        <h2>A Ubuntu compatible kernel can be pulled from github</h2>
        <pre class="highlight plaintext"><code>$ cd ~ # I put all of this in my home dir
        $ sudo apt-get install git
        $ git clone https://github.com/HSAFoundation/Linux-HSA-Drivers-And-Images-AMD.git
        </code></pre>
        <p>Or you can pull the zip and unzip using curl if you don&rsquo;t have git</p>
        <pre class="highlight plaintext"><code>$ cd ~ # I put all of this in my home dir
        $ curl -L https://github.com/HSAFoundation/Linux-HSA-Drivers-And-Images-AMD/archive/master.zip &gt; drivers.zip
        $ unzip drivers.zip
        </code></pre>
        <p>This will create the following subdir on your machine</p>
        <pre class="highlight plaintext"><code>Linux-HSA-Drivers-And-Images-AMD/
           LICENSE
           README.md
           ubuntu12.10-based-alpha1/
               xorg.conf
               linux-image-3.13.0-kfd+_3.13.0-kfd+-2_amd64.deb
        </code></pre>
        <p>From here we can install our new image and setup the HSA KFD (the driver for HSA)and reboot to the new kernel.</p>
        <pre class="highlight plaintext"><code>$ cd ~/Linux-HSA-Drivers-And-Images-AMD
        $ echo  "KERNEL==\"kfd\", MODE=\"0666\"" | sudo tee /etc/udev/rules.d/kfd.rules
        $ sudo dpkg -i ubuntu13.10-based-alpha1/linux-image-3.13.0-kfd+_3.13.0-kfd+-2_amd64.deb
        $ sudo cp ~/Linux-HSA-Drivers-And-Images-AMD/ubuntu13.10-based-alpha1/xorg.conf /etc/X11
        $ sudo reboot
        </code></pre>
        <h2>Installing OKRA RT</h2>
        
        <p>Now we need a runtime for executing HSAIL code. We share common infrastructure used by our sister OpenJDK project called Sumatra. Both Aparapi and Sumatra use OKRA to execute HSAIL code on a HSA enabled platform.</p>
        
        <p>We can get the latest version using of OKRA (Offloadable Kernel Runtime API) from another HSA foundation repository.</p>
        <pre class="highlight plaintext"><code>$ cd ~ # I put all of this in my home dir
        $ git clone https://github.com/HSAFoundation/Okra-Interface-to-HSA-Device.git
        </code></pre>
        <p>or if you prefer curl/unzip</p>
        <pre class="highlight plaintext"><code>$ cd ~ # I put all of this in my home dir
        $ curl -L https://github.com/HSAFoundation/Okra-Interface-to-HSA-Device/archive/master.zip &gt; okra.zip
        $ unzip okra.zip
        </code></pre>
        <p>This will create the following dir structure.</p>
        <pre class="highlight plaintext"><code>Okra-Interface-to-HSA-Device/
           README.md
           okra/
              README
              dist/
                 okra.jar
                 bin/
                    libamdhsacl64.so
                    libnewhsacore64.so
                    libokra_x86_64.so
                 include/
                    common.h
                    okraContext.h
        
              samples/
                 dist/
                   Squares
                   Squares.hsail
                 runSquares.sh
        </code></pre>
        <p>OKRA offers a C API (for those that are so inclined ;) ) as well as a java jar file which contains JNI wrappers.</p>
        
        <h2>Sanity check your HSA and OKRA install</h2>
        
        <p>So to sanity check your install you can run a small sample app (binary)</p>
        <pre class="highlight plaintext"><code>$ cd ~/Okra-Interface-to-HSA-Device/okra/samples/
        $ sh runSquares.sh
        </code></pre>
        <p>If everything is OK this should run the C Squares test app.</p>
        
        <p>Congratulations, you have executed your first HSA enabled app.</p>
        
        <p>Getting OpenCL headers and libraries
        We need OpenCL headers and libraries to build Aparapi (remember we still support OpenCL).</p>
        
        <p>My recommendation is to download AMD-APP-SDK-v2.9-lnx64.tgz from <a href="http://developer.amd.com/tools-and-sdks/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/downloads" rel="nofollow">http://developer.amd.com/tools-and-sdks/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/downloads</a> and extract the libraries and headers.</p>
        
        <p>Note that we have nested zipped jars in this archive.</p>
        <pre class="highlight plaintext"><code>$ cd ~
        $ gunzip ~/Downloads/AMD-APP-SDK-v2.9-lnx64.tgz
        $ tar xvf ~/Downloads/AMD-APP-SDK-v2.9-lnx64.tar
        $ rm ~/default-install_lnx_64.pl ~/icd-registration.tgz ~/Install-AMD-APP.sh ~/ReadMe.txt
        $ gunzip ~/AMD-APP-SDK-v2.9-RC-lnx64.tgz
        $ tar xvf ~/AMD-APP-SDK-v2.9-RC-lnx64.tar
        $ rm ~/AMD-APP-SDK-v2.9-RC-lnx64.tar
        $ rm -rf AMD-APP-SDK-v2.9-RC-lnx64/samples
        </code></pre>
        <p>Note where AMD-APP-SDK-v2.9-RC-lnx64 is located, you need this in the following step.</p>
        
        <h2>You will need Java 8</h2>
        
        <p>Download Java 8 JDK from <a href="https://jdk8.java.net/download.html" rel="nofollow">https://jdk8.java.net/download.html</a> I chose to download the zipped tar and not install with RPM so I can control the location of the install.</p>
        <pre class="highlight plaintext"><code>$ cd ~
        $ gunzip /home/gfrost/Downloads/jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz
        $ tar xvf ~/Downloads/jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar
        </code></pre>
        <p>I now have ~/jdk1.8.0 as my java 8 install dir.</p>
        
        <p>Alternatively the following will pull from Oracles site using curl</p>
        <pre class="highlight plaintext"><code>$ cd ~
        $ curl http://download.java.net/jdk8/archive/b132/binaries/jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz?q=download/jdk8/archive/b132/binaries/jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz &gt; jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz
        $ gunzip jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar.gz
        $ tar xvf jdk-8-fcs-bin-b132-linux-x64-04_mar_2014.tar
        </code></pre>
        <p>I now have ~/jdk1.8.0 as my java 8 install dir.</p>
        
        <h2>You will need ant</h2>
        <pre class="highlight plaintext"><code>$ sudo apt-get install ant
        </code></pre>
        <p>This takes a long time because in also installs a java7 jdk.</p>
        
        <h2>You will need g++</h2>
        
        <p>We use g++ to build the JNI side of Aparapi</p>
        <pre class="highlight plaintext"><code>$ sudo apt-get install g++
        </code></pre>
        <h2>Pulling the HSA enabled Aparapi branch and building</h2>
        
        <p>Now we can pull the Aparapi lambda/HSA branch from SVN</p>
        <pre class="highlight plaintext"><code>$ sudo apt-get install subversion
        $ svn checkout https://aparapi.googlecode.com/svn/branches/lambda aparapi-lambda
        </code></pre>
        <p>If you are familiar with Aparapi structure then this tree should not be that much of a surprise but there are a few subtle changes.</p>
        
        <p>Specifically the build system has been changed to support OKRA, Aparapi JNI code is provided as a Java agent and the execution scripts all refer to ${APARAPI_HOME}/env.sh to setup a reasonable execution environment.</p>
        
        <p>You will need to edit env.sh and make sure that APARAPI<em>HOME, OKRA</em>HOME, OCL<em>HOME and JAVA</em>HOME correctly.</p>
        
        <p>Here are how I set my vars.</p>
        
        <table><thead>
        <tr>
        <th>environment variable</th>
        <th>value</th>
        </tr>
        </thead><tbody>
        <tr>
        <td>JAVA_HOME</td>
        <td>/home/${LOGNAME}/jdk1.8.0</td>
        </tr>
        <tr>
        <td>OCL_HOME</td>
        <td>/home/${LOGNAME}/AMD-APP-SDK-v2.9-RC-lnx64</td>
        </tr>
        <tr>
        <td>APARAPI_HOME</td>
        <td>/home/${LOGNAME}/aparapi-lambda</td>
        </tr>
        <tr>
        <td>OKRA_HOME</td>
        <td>/home/${LOGNAME}/Okra-Interface-to-HSA-Device/okra/</td>
        </tr>
        </tbody></table>
        
        <p>It is recommended (thanks notzed ;) ) that you test your env.sh using sh env.sh until it stops reporting errors. Once you have finished I recommend sourcing it into your current shell before building with ant.</p>
        <pre class="highlight plaintext"><code>$ cd ~aparapi-lambda
        $ . env.sh
        $ ant
        </code></pre>
        <p>If you get any problems check the env.sh vars first.</p>
        
        <p>If all is well you should be able to run some samples.</p>
        <pre class="highlight plaintext"><code>$ cd ~/aparapi-lambda/samples/mandel
        $ sh hsailmandel.sh
        </code></pre>
      </div>
    </main>
    <footer class='page-footer'>
      <div class='container'>
        <div class='row'>
          <div class='col l4 s12'>
            <h5 class='white-text'>Help Aparapi Grow</h5>
            <p class='grey-text text-lighten-4'>We are a team of volunteers working on this project like it's our full time job. Any amount would help support and continue development on this project and is greatly appreciated.</p>
            <form action='https://www.paypal.com/cgi-bin/webscr' id='paypal-donate' method='post' target='_top'>
              <input name='cmd' type='hidden' value='_s-xclick'>
              <input name='encrypted' type='hidden' value='-----BEGIN PKCS7-----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-----END PKCS7-----'>
              <button alt='PayPal - The safer, easier way to pay online!' class='btn waves-effect waves-light red lighten-3' name='action' type='submit'>
                Donate Now
              </button>
            </form>
          </div>
          <div class='col l4 s12'>
            <h5 class='white-text'>Join the Discussion</h5>
            <p class='grey-text text-lighten-4'>We have a Gitter chat room set up where you can talk directly with us. Come in and discuss new features, future goals, general problems or questions, or anything else you can think of.</p>
            <a class='btn waves-effect waves-light red lighten-3' href='https://gitter.im/Syncleus/aparapi' target='_blank'>Chat</a>
          </div>
          <div class='col l4 s12' style='overflow: hidden;'>
            <h5 class='white-text'>Connect</h5>
            <iframe allowtransparency='true' frameborder='0' height='30' scrolling='0' src='http://ghbtns.com/github-btn.html?user=Syncleus&amp;repo=aparapi&amp;type=watch&amp;count=true&amp;size=large' width='170'></iframe>
            <br>
            <a class='twitter-follow-button' data-dnt='true' data-show-count='true' data-size='large' href='https://twitter.com/AparapiLib'>Follow @AparapiLib</a>
            <br>
            <div class='g-follow' data-annotation='bubble' data-height='24' data-href='https://plus.google.com/102266131584900704956' data-rel='publisher'></div>
          </div>
        </div>
      </div>
      <div class='footer-copyright'>
        <div class='container'>
          © 2016-2017 Syncleus, All rights reserved.
          <a class='grey-text text-lighten-4 right' href='https://github.com/Syncleus/aparapi/blob/master/LICENSE'>Apache License v2</a>
        </div>
      </div>
    </footer>
    <!-- Scripts -->
    <script src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
    <script>
      if (!window.jQuery) { document.write('<script src="bin/jquery-2.1.1.min.js"><\/script>'); }
    </script>
    <script src='/javascripts/jquery.timeago.js'></script>
    <script src='/javascripts/materialize.min.js'></script>
    <script src='/javascripts/lunr.min.js'></script>
    <script src='/javascripts/search.js'></script>
    <script src='/javascripts/materialize.js'></script>
    <script src='/javascripts/init.js'></script>
    <!-- Twitter Button -->
    <script>
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
    </script>
    <!-- Google Plus Button -->
    <script async='' defer='defer' src='https://apis.google.com/js/platform.js'></script>
  </body>
</html>
